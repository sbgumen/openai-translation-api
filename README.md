# OpenAI Translation API


åŸºäºOpenAI APIçš„å¤šåŠŸèƒ½ç¿»è¯‘æœåŠ¡ï¼Œæ”¯æŒæ–‡æœ¬ã€è¡¨æ ¼ã€æ–‡æ¡£å’ŒéŸ³é¢‘ç¿»è¯‘ï¼Œå¸¦æœ‰ç°ä»£åŒ–ç®¡ç†æ§åˆ¶å°ã€‚



## ğŸ“‹ ç›®å½•

- [ç‰¹æ€§](#-ç‰¹æ€§)
- [ç³»ç»Ÿè¦æ±‚](#-ç³»ç»Ÿè¦æ±‚)
- [å®‰è£…](#-å®‰è£…)
- [é…ç½®](#-é…ç½®)
- [å¯åŠ¨æœåŠ¡](#-å¯åŠ¨æœåŠ¡)
- [APIå‚è€ƒ](#-apiå‚è€ƒ)
  - [è®¤è¯](#è®¤è¯)
  - [æ–‡æœ¬ç¿»è¯‘](#æ–‡æœ¬ç¿»è¯‘)
  - [è¡¨æ ¼ç¿»è¯‘](#è¡¨æ ¼ç¿»è¯‘)
  - [æ–‡ä»¶ç¿»è¯‘](#æ–‡ä»¶ç¿»è¯‘)
- [ç®¡ç†æ§åˆ¶å°](#-ç®¡ç†æ§åˆ¶å°)
- [å®¢æˆ·ç«¯ç¤ºä¾‹](#-å®¢æˆ·ç«¯ç¤ºä¾‹)
- [è¡¨æ ¼ç¿»è¯‘ä¼˜åŒ–](#-è¡¨æ ¼ç¿»è¯‘ä¼˜åŒ–)
- [é”™è¯¯å¤„ç†](#-é”™è¯¯å¤„ç†)
- [å®‰å…¨å»ºè®®](#-å®‰å…¨å»ºè®®)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [è®¸å¯è¯](#-è®¸å¯è¯)

## âœ¨ ç‰¹æ€§

- ğŸ”¤ **æ–‡æœ¬ç¿»è¯‘** - ç¿»è¯‘æ™®é€šæ–‡æœ¬å†…å®¹
- ğŸ“Š **è¡¨æ ¼ç¿»è¯‘** - æ”¯æŒå¤šç§è¡¨æ ¼æ ¼å¼çš„æ™ºèƒ½ç¿»è¯‘
- ğŸ“„ **æ–‡æ¡£ç¿»è¯‘** - ç¿»è¯‘å¤šç§æ–‡æ¡£æ ¼å¼
- ğŸµ **éŸ³é¢‘ç¿»è¯‘** - å°†éŸ³é¢‘è½¬å½•ç„¶åç¿»è¯‘
- ğŸ”‘ **APIå¯†é’¥ç®¡ç†** - å®‰å…¨çš„å¯†é’¥åˆ›å»ºå’Œç®¡ç†
- ğŸ›¡ï¸ **ç®¡ç†æ§åˆ¶å°** - ç°ä»£åŒ–çš„ç®¡ç†ç•Œé¢
- âš™ï¸ **çµæ´»é…ç½®** - æ”¯æŒé…ç½®OpenAIæ¨¡å‹å’Œå‚æ•°
- ğŸŒ **å›½é™…åŒ–æ”¯æŒ** - æ”¯æŒå¤šè¯­è¨€ç¿»è¯‘
- ğŸ“ **APIæ–‡æ¡£** - å†…ç½®è¯¦ç»†çš„æ¥å£æ–‡æ¡£

## ğŸ’» ç³»ç»Ÿè¦æ±‚

- Node.js 14.0+
- npm 6.0+

## ğŸš€ å®‰è£…

### å…‹éš†ä»“åº“

```bash
git clone https://github.com/sbgumen/openai-translation-api.git
cd openai-translation-api
```

### å®‰è£…ä¾èµ–

```bash
npm install
```

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

##æ·»åŠ é…ç½®
å¤åˆ¶`.env.example`æ–‡ä»¶ä¸º`.env`å¹¶é…ç½®ä»¥ä¸‹å˜é‡:

```bash
# æœåŠ¡å™¨é…ç½®
PORT=3000                        # æœåŠ¡å™¨ç«¯å£
NODE_ENV=development             # ç¯å¢ƒ(development/production)

# OpenAIé…ç½®
OPENAI_API_KEY=your_openai_api_key  # OpenAI APIå¯†é’¥
OPENAI_API_BASE_URL=https://api.openai.com/v1  # APIåŸºç¡€URL(å¯é…ç½®å›½å†…ä¸­è½¬åœ°å€)

# JWTé…ç½®
JWT_SECRET=your_jwt_secret_key_change_this_in_production  # JWTå¯†é’¥
JWT_EXPIRES_IN=24h              # JWTè¿‡æœŸæ—¶é—´

# ç®¡ç†å‘˜é…ç½®
ADMIN_USERNAME=root             # é»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·å
ADMIN_PASSWORD=123456           # é»˜è®¤ç®¡ç†å‘˜å¯†ç 
```
openaiå›½å†…ä¸­è½¬api:[https://api.lzx1.top](https://api.lzx1.top)
## ğŸƒ å¯åŠ¨æœåŠ¡

### å¼€å‘æ¨¡å¼å¯åŠ¨

```bash
npm run dev
```

### ç”Ÿäº§æ¨¡å¼å¯åŠ¨

```bash
npm start
```

### è®¿é—®æœåŠ¡

- APIæœåŠ¡åœ°å€: `http://localhost:3000/`
- APIæ–‡æ¡£: `http://localhost:3000/docs`
- ç®¡ç†æ§åˆ¶å°: `http://localhost:3000/admin`
  - é»˜è®¤ç”¨æˆ·å: `root`
  - é»˜è®¤å¯†ç : `123456`

## ğŸ“˜ APIå‚è€ƒ

### è®¤è¯

æ‰€æœ‰APIè°ƒç”¨éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«æœ‰æ•ˆçš„APIå¯†é’¥:

```
X-API-Key: your-api-key-here
```

### æ–‡æœ¬ç¿»è¯‘

**ç«¯ç‚¹**: `POST /api/translate/text`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
X-API-Key: your-api-key
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| text | string | æ˜¯ | è¦ç¿»è¯‘çš„æ–‡æœ¬ |
| sourceLanguage | string | å¦ | æºè¯­è¨€ï¼ˆé»˜è®¤ä¸º"ä¸­æ–‡"ï¼‰ |
| targetLanguage | string | å¦ | ç›®æ ‡è¯­è¨€ï¼ˆé»˜è®¤ä¸º"è‹±æ–‡"ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:

```json
{
  "text": "äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚",
  "sourceLanguage": "ä¸­æ–‡",
  "targetLanguage": "è‹±æ–‡"
}
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "success": true,
  "data": {
    "translatedText": "Artificial intelligence is changing our way of life.",
    "usage": {
      "prompt_tokens": 23,
      "completion_tokens": 9,
      "total_tokens": 32
    }
  }
}
```

### è¡¨æ ¼ç¿»è¯‘

**ç«¯ç‚¹**: `POST /api/translate/table`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
X-API-Key: your-api-key
```

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| table | object/array | æ˜¯ | è¦ç¿»è¯‘çš„è¡¨æ ¼æ•°æ®ï¼Œæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š<br>- å¯¹è±¡æ•°ç»„: `[{},{},...]`<br>- äºŒç»´æ•°ç»„: `[[],[],...]`<br>- åµŒå¥—å¯¹è±¡: `{key:{...},...}` |
| sourceLanguage | string | å¦ | æºè¯­è¨€ï¼ˆé»˜è®¤ä¸º"ä¸­æ–‡"ï¼‰ |
| targetLanguage | string | å¦ | ç›®æ ‡è¯­è¨€ï¼ˆé»˜è®¤ä¸º"è‹±æ–‡"ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:

```json
{
  "table": [
    {"å§“å": "å¼ ä¸‰", "èŒä½": "è½¯ä»¶å·¥ç¨‹å¸ˆ", "éƒ¨é—¨": "ç ”å‘éƒ¨"},
    {"å§“å": "æå››", "èŒä½": "äº§å“ç»ç†", "éƒ¨é—¨": "äº§å“éƒ¨"}
  ],
  "sourceLanguage": "ä¸­æ–‡",
  "targetLanguage": "è‹±æ–‡"
}
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "success": true,
  "data": {
    "translatedTable": [
      {"name": "Zhang San", "position": "Software Engineer", "department": "R&D Department"},
      {"name": "Li Si", "position": "Product Manager", "department": "Product Department"}
    ],
    "usage": {
      "prompt_tokens": 82,
      "completion_tokens": 48,
      "total_tokens": 130
    }
  }
}
```

### æ–‡ä»¶ç¿»è¯‘

**ç«¯ç‚¹**: `POST /api/translate/file`

**è¯·æ±‚æ ¼å¼**: `multipart/form-data`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| file | file | æ˜¯ | è¦ç¿»è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š<br>- æ–‡æœ¬æ–‡ä»¶: `.txt`<br>- è¡¨æ ¼æ–‡ä»¶: `.csv`, `.json`, `.xls`, `.xlsx`<br>- æ–‡æ¡£æ–‡ä»¶: `.doc`, `.docx`<br>- éŸ³é¢‘æ–‡ä»¶: `.mp3`, `.wav`, `.mp4`<br>æœ€å¤§æ–‡ä»¶å¤§å°ï¼š10MB |
| sourceLanguage | string | å¦ | æºè¯­è¨€ï¼ˆé»˜è®¤ä¸º"ä¸­æ–‡"ï¼‰ |
| targetLanguage | string | å¦ | ç›®æ ‡è¯­è¨€ï¼ˆé»˜è®¤ä¸º"è‹±æ–‡"ï¼‰ |

**å“åº”ç¤ºä¾‹** (æ–‡æœ¬æ–‡ä»¶):

```json
{
  "success": true,
  "data": {
    "translatedText": "This is the translated content of the document.",
    "usage": {
      "prompt_tokens": 45,
      "completion_tokens": 10,
      "total_tokens": 55
    }
  }
}
```

**å“åº”ç¤ºä¾‹** (éŸ³é¢‘æ–‡ä»¶):

```json
{
  "success": true,
  "data": {
    "originalText": "è¿™æ˜¯åŸå§‹çš„éŸ³é¢‘è½¬å½•å†…å®¹",
    "translatedText": "This is the original transcribed audio content",
    "usage": {
      "transcription": {
        "seconds": 5
      },
      "translation": {
        "prompt_tokens": 30,
        "completion_tokens": 12,
        "total_tokens": 42
      }
    }
  }
}
```

## ğŸ› ï¸ ç®¡ç†æ§åˆ¶å°

ç®¡ç†æ§åˆ¶å°æä¾›ç›´è§‚çš„å›¾å½¢ç•Œé¢æ¥ç®¡ç†APIå¯†é’¥å’Œç³»ç»Ÿè®¾ç½®:

### åŠŸèƒ½

1. **APIå¯†é’¥ç®¡ç†**
   - åˆ›å»ºæ–°çš„APIå¯†é’¥
   - è®¾ç½®å¯†é’¥è¿‡æœŸæ—¶é—´
   - ç›‘æ§å¯†é’¥ä½¿ç”¨æƒ…å†µ
   - åˆ é™¤å¤±æ•ˆå¯†é’¥

2. **ç³»ç»Ÿè®¾ç½®**
   - é€‰æ‹©OpenAIæ¨¡å‹
     - gpt-3.5-turbo: å¹³è¡¡é€Ÿåº¦ä¸æ€§èƒ½
     - gpt-3.5-turbo-16k: æ”¯æŒæ›´é•¿æ–‡æœ¬
     - gpt-4: æ›´é«˜ç¿»è¯‘è´¨é‡
     - gpt-4-turbo: æœ€æ–°æ€§èƒ½

3. **å®‰å…¨åŠŸèƒ½**
   - ç®¡ç†å‘˜å¯†ç ä¿®æ”¹
   - ä¼šè¯ç®¡ç†
   - èº«ä»½éªŒè¯ä¿æŠ¤

### è®¿é—®æ§åˆ¶å°

è®¿é—®åœ°å€: `http://localhost:3000/admin`

é»˜è®¤å‡­æ®:
- ç”¨æˆ·å: `root`
- å¯†ç : `123456`

## ğŸ“± å®¢æˆ·ç«¯ç¤ºä¾‹

### Curl

```bash
# æ–‡æœ¬ç¿»è¯‘
curl -X POST \
  http://localhost:3000/api/translate/text \
  -H 'Content-Type: application/json' \
  -H 'X-API-Key: your-api-key-here' \
  -d '{
    "text": "ä½ å¥½ï¼Œä¸–ç•Œï¼",
    "sourceLanguage": "ä¸­æ–‡",
    "targetLanguage": "è‹±æ–‡"
  }'

# è¡¨æ ¼ç¿»è¯‘
curl -X POST \
  http://localhost:3000/api/translate/table \
  -H 'Content-Type: application/json' \
  -H 'X-API-Key: your-api-key-here' \
  -d '{
    "table": [
      {"å§“å": "å¼ ä¸‰", "èŒä½": "è½¯ä»¶å·¥ç¨‹å¸ˆ"},
      {"å§“å": "æå››", "èŒä½": "äº§å“ç»ç†"}
    ],
    "sourceLanguage": "ä¸­æ–‡",
    "targetLanguage": "è‹±æ–‡"
  }'

# æ–‡ä»¶ç¿»è¯‘
curl -X POST \
  http://localhost:3000/api/translate/file \
  -H 'X-API-Key: your-api-key-here' \
  -F 'file=@/path/to/your/document.txt' \
  -F 'sourceLanguage=ä¸­æ–‡' \
  -F 'targetLanguage=è‹±æ–‡'
```

### Node.js

```javascript
const axios = require('axios');

// æ–‡æœ¬ç¿»è¯‘
async function translateText() {
  try {
    const response = await axios.post(
      'http://localhost:3000/api/translate/text',
      {
        text: 'äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚',
        sourceLanguage: 'ä¸­æ–‡',
        targetLanguage: 'è‹±æ–‡'
      },
      {
        headers: {
          'Content-Type': 'application/json',
          'X-API-Key': 'your-api-key-here'
        }
      }
    );
    
    console.log(response.data);
  } catch (error) {
    console.error('ç¿»è¯‘å¤±è´¥:', error.response?.data || error.message);
  }
}
```

### Python

```python
import requests
import json

# æ–‡æœ¬ç¿»è¯‘
def translate_text():
    url = "http://localhost:3000/api/translate/text"
    headers = {
        "Content-Type": "application/json",
        "X-API-Key": "your-api-key-here"
    }
    data = {
        "text": "äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚",
        "sourceLanguage": "ä¸­æ–‡",
        "targetLanguage": "è‹±æ–‡"
    }
    
    try:
        response = requests.post(url, headers=headers, data=json.dumps(data))
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"ç¿»è¯‘è¯·æ±‚å¤±è´¥: {e}")
        return None
```

## ğŸ“Š è¡¨æ ¼ç¿»è¯‘ä¼˜åŒ–

æœ¬æœåŠ¡é’ˆå¯¹è¡¨æ ¼ç¿»è¯‘åšäº†ä¸“é—¨ä¼˜åŒ–ï¼Œæ”¯æŒå¤šç§è¡¨æ ¼æ ¼å¼:

### æ”¯æŒçš„è¡¨æ ¼æ ¼å¼

1. **å¯¹è±¡æ•°ç»„æ ¼å¼**
```json
[
  {"å§“å": "å¼ ä¸‰", "èŒä½": "è½¯ä»¶å·¥ç¨‹å¸ˆ"},
  {"å§“å": "æå››", "èŒä½": "äº§å“ç»ç†"}
]
```

2. **äºŒç»´æ•°ç»„æ ¼å¼**
```json
[
  ["å§“å", "èŒä½"],
  ["å¼ ä¸‰", "è½¯ä»¶å·¥ç¨‹å¸ˆ"],
  ["æå››", "äº§å“ç»ç†"]
]
```

3. **åµŒå¥—å¯¹è±¡æ ¼å¼**
```json
{
  "å‘˜å·¥1": {"å§“å": "å¼ ä¸‰", "èŒä½": "è½¯ä»¶å·¥ç¨‹å¸ˆ"},
  "å‘˜å·¥2": {"å§“å": "æå››", "èŒä½": "äº§å“ç»ç†"}
}
```

### ä¼˜åŒ–ç‰¹ç‚¹

- **è‡ªåŠ¨ç»“æ„æ£€æµ‹**: ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é€‚é…ä¸åŒè¡¨æ ¼ç»“æ„
- **é”®åä¿ç•™**: ç¿»è¯‘å¯¹è±¡æ—¶ï¼Œé”®åä¿æŒä¸å˜ï¼Œåªç¿»è¯‘å€¼
- **ç»“æ„ä¸€è‡´æ€§**: ç¡®ä¿ç¿»è¯‘å‰åçš„æ•°æ®ç»“æ„å®Œå…¨ä¸€è‡´
- **é”™è¯¯ä¿®å¤**: å¯¹äºJSONè§£æé”™è¯¯ä¼šè‡ªåŠ¨å°è¯•ä¿®å¤

## â— é”™è¯¯å¤„ç†

APIä¼šè¿”å›é€‚å½“çš„HTTPçŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•å’Œé”™è¯¯å¤„ç†ï¼š

| HTTPçŠ¶æ€ç  | é”™è¯¯ç±»å‹ | è¯´æ˜ |
|-----------|---------|------|
| 400 | è¯·æ±‚é”™è¯¯ | è¯·æ±‚å‚æ•°ä¸æ­£ç¡®æˆ–ç¼ºå¤±å¿…éœ€å‚æ•° |
| 401 | è®¤è¯é”™è¯¯ | APIå¯†é’¥ç¼ºå¤±ã€æ— æ•ˆæˆ–å·²è¿‡æœŸ |
| 413 | å†…å®¹è¿‡å¤§ | ä¸Šä¼ çš„æ–‡ä»¶è¶…è¿‡å¤§å°é™åˆ¶ |
| 415 | ä¸æ”¯æŒçš„åª’ä½“ç±»å‹ | ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ä¸å—æ”¯æŒ |
| 429 | è¯·æ±‚è¿‡å¤š | è¶…å‡ºAPIè°ƒç”¨é¢‘ç‡é™åˆ¶ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯æˆ–OpenAI APIè°ƒç”¨å¤±è´¥ |

**é”™è¯¯å“åº”ç¤ºä¾‹**:

```json
{
  "success": false,
  "message": "APIå¯†é’¥æ— æ•ˆæˆ–å·²è¿‡æœŸ",
  "error": "InvalidApiKey"
}
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **æ›´æ”¹é»˜è®¤å‡­æ®**: é¦–æ¬¡ç™»å½•åç«‹å³æ›´æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 

2. **APIå¯†é’¥ç®¡ç†**:
   - ä¸ºä¸åŒç”¨é€”åˆ›å»ºä¸åŒçš„APIå¯†é’¥
   - è®¾ç½®åˆç†çš„å¯†é’¥è¿‡æœŸæ—¶é—´
   - å®šæœŸè½®æ¢å¯†é’¥
   - ç›‘æ§å¼‚å¸¸ä½¿ç”¨æƒ…å†µ

3. **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**:
   - ä½¿ç”¨HTTPSåŠ å¯†è¿æ¥
   - é…ç½®é€‚å½“çš„ç½‘ç»œè®¿é—®æ§åˆ¶
   - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
   - å®šæœŸæ›´æ–°ä¾èµ–åŒ…

## â“ å¸¸è§é—®é¢˜

### 1. APIå¯†é’¥éªŒè¯å¤±è´¥

**é—®é¢˜**: è¯·æ±‚è¿”å›401é”™è¯¯ï¼Œæç¤º"APIå¯†é’¥æ— æ•ˆ"

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤APIå¯†é’¥æ ¼å¼æ­£ç¡®ä¸”æœªè¿‡æœŸ
- åœ¨è¯·æ±‚å¤´ä¸­ä½¿ç”¨`X-API-Key`å­—æ®µ
- é€šè¿‡ç®¡ç†æ§åˆ¶å°æ£€æŸ¥å¯†é’¥çŠ¶æ€

### 2. OpenAI APIè¿æ¥é—®é¢˜

**é—®é¢˜**: æœåŠ¡è¿”å›"è¿æ¥OpenAI APIå¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥OpenAI APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
- å¦‚æœåœ¨ä¸­å›½å¤§é™†ä½¿ç”¨ï¼Œé…ç½®å¯ç”¨çš„APIä¸­è½¬åœ°å€
- ç¡®è®¤ç½‘ç»œè¿æ¥ç¨³å®š

### 3. è¡¨æ ¼ç¿»è¯‘ç»“æ„é”™è¯¯

**é—®é¢˜**: ç¿»è¯‘åçš„è¡¨æ ¼ç»“æ„ä¸åŸå§‹è¡¨æ ¼ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿åŸè¡¨æ ¼æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼
- å°è¯•ä½¿ç”¨`gpt-4`æ¨¡å‹è·å¾—æ›´å‡†ç¡®çš„ç»“æ„ä¿ç•™
- å¯¹äºå¤æ‚è¡¨æ ¼ï¼Œå°†å¤§è¡¨æ ¼æ‹†åˆ†ä¸ºå°å—å¤„ç†

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶
